#[unsafe]
#[extern("C")]
fn puts(msg: &) -> i32;

#[unsafe]
#[vararg]
#[extern("C")]
fn printf(fmt: &[u8]) -> i32;

fn char_at(arr: &[u8], index: uptr) -> u8 {
    //*#[unsafe]{arr as uptr as &u8}
    let ptr = #[unsafe]{arr as uptr};
    let char = ptr as &u8;
    *char
}

fn char_str(c: u8) -> [u8;1] {
    *{{&c} as &[u8;1]}
}

fn main(){
    let index = 1uptr;
    let c: u8 = char_at(&"hello", index);
    #[unsafe]
    printf(&"char at %d: chr(%d) = '%c' -> \"%s\"\n", index, c as u32, c, char_str(c));
}